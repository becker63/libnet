import ../raii/basics
import ../attrs/chainAttrsCoersion
import ../autogenerated/generated_nftnl
import ../contracts/chain

template defChainProp(attr: static enum_nftnl_chain_attr, propName: untyped) =
  proc propName*(c: Chain): expectedType(attr) =
    c.getAttr(attr)

  proc `propName=`*(c: Chain, v: expectedType(attr)) =
    c.setAttr(attr, v)

# String properties
defChainProp(NFTNL_CHAIN_NAME, name)
defChainProp(NFTNL_CHAIN_TABLE, table)
defChainProp(NFTNL_CHAIN_TYPE, typeName)
defChainProp(NFTNL_CHAIN_DEV, dev)
defChainProp(NFTNL_CHAIN_USERDATA, userdata)

# uint32 properties
defChainProp(NFTNL_CHAIN_FAMILY, family)
defChainProp(NFTNL_CHAIN_HOOKNUM, hooknum)
defChainProp(NFTNL_CHAIN_PRIO, prio)
defChainProp(NFTNL_CHAIN_POLICY, policy)

# uint64 properties
defChainProp(NFTNL_CHAIN_HANDLE, handle)
